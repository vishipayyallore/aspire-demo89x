# Azure Developer CLI Configuration
name: aspire-demo89x
metadata:
  template: aspire-demo89x@1.0.0
workflows:
  up:
    steps:
      - azd: provision
      - azd: deploy

# Services configuration
services:
  apiservice:
    project: ./src/HelloAspireApp.ApiService
    host: containerapp
    language: csharp

  webfrontend:
    project: ./src/HelloAspireApp.Web
    host: containerapp
    language: csharp

# Infrastructure configuration
infra:
  provider: bicep
  path: ./infra

# Hooks configuration
hooks:
  predeploy:
    shell: sh
    run: echo "Starting deployment to Azure Container Apps with custom naming..."
    continueOnError: false

  postdeploy:
    shell: sh
    run: echo "Deployment completed! Check Azure portal for resource status."
    continueOnError: true

# Environment configuration
env:
  # Default environment suffix for resource naming
  AZURE_ENV_SUFFIX:
    type: string
    default: "D"
    description: "Environment suffix for Azure resource naming (D=Dev, S=Staging, P=Prod)"

  # Azure location
  AZURE_LOCATION:
    type: string
    default: "eastus2"
    description: "Primary Azure region for deployment"

  # Container App Environment
  AZURE_CONTAINER_ENVIRONMENT:
    type: string
    default: "sv-cae-D"
    description: "Azure Container App Environment name (auto-generated by FixedNameInfrastructureResolver)"

# Platform configuration
platform:
  type: azure
